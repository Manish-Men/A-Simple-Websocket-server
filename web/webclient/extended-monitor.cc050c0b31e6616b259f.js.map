{"version":3,"sources":["webpack:///./desktop/multimon/extended-page/module.js","webpack:///./template-module.js?3fd8","webpack:////Users/yuez/gitvmware/htmlaccess1/ui/~/ng-dialog/css/ngDialog.css?b93c","webpack:///./styles/modal-dialogs.css?773d","webpack:///./common/commondialog/dialog_simple_confirm.html","webpack:///./desktop/multimon/extended-page/extended_monitor_detector_template.html","webpack:///./desktop/multimon/common/module.js?c6fd","webpack:///./desktop/multimon/common/bitbuffer.js?f5fa","webpack:///./desktop/multimon/common/fullscreen-service.js?114e","webpack:///./desktop/multimon/common/normalization-service.js?d578","webpack:///./desktop/multimon/common/render-cache-service.js?2811","webpack:///./desktop/multimon/common/vnc-decoder.js?7502","webpack:///./desktop/multimon/common/wmks-base-service.js?e674","webpack:///./desktop/multimon/extended-page/extended-monitor-controller.js","webpack:///./desktop/multimon/extended-page/extended-monitor-detector.js","webpack:///./desktop/multimon/extended-page/extended-monitor-displayer.js","webpack:///./desktop/multimon/extended-page/extended-monitor-util.js","webpack:///./desktop/multimon/extended-page/multimon-wmks-service.js","webpack:///./desktop/multimon/extended-page/route.js","webpack:///./styles/extended-monitor.css"],"names":["module","config","controller","service","name","angular","bitBuffer","BitBuffer","buffer","size","_buf","_size","_readCount","_overflow","_thisByte","_thisByteBits","prototype","readBits0","val","nr","mask","_bits","readBits","origNr","readEliasGamma","l","value","bit","origidx","origbit","newInstance","fullscreenSubService","fullscreenService","$window","isFullscreen","document","fullScreenElement","undefined","msFullscreenElement","mozFullScreen","webkitIsFullScreen","waitCondition","condition","callback","waitMaxTime","waitTime","checkInterval","checkFunction","waitTimer","clearInterval","setInterval","$timeout","fullscreenHandler","onFullscreenChanged","event","console","info","onEnterFullscreen","error","tolerent","screenX","screen","availLeft","screenY","availTop","onExitFullscreen","enterFullscreen","elem","requestFullScreen","mozRequestFullScreen","webkitRequestFullscreen","ALLOW_KEYBOARD_INPUT","webkitRequestFullScreen","msRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","bindFullScreen","$","on","unbindFullScreen","off","normalizationService","_perMonitorMode","clear","_rawSetting","_normalizationModel","_normalizedSettings","_defaultModel","_agentDPI","_DPIEnabled","setAgentDPI","dpi","setPerMonitor","usePerMonitor","isPerMonitorMode","getFactor","id","baseDPI","devicePixelRatio","monitorDPI","compensateFactor","clientFactor","setDPISync","enabled","_getNormalizationParam","target","refer","k","param","tx","x","ty","y","normalize","point","model","Math","round","revert","_getStablePoint","baseId","isLeft","width","isRight","isTop","height","isDown","max","_generateModel","key","hasOwnProperty","stablePoint","Number","_calculateNormalizedSetting","startPoint","isModified","_clipSettings","setScreenModel","setRawSetting","setting","removeRawSetting","calculate","getNormalizationModel","getNormalizedSettings","getSizeFactor","isScaleMismatched","renderCacheService","decodeToCacheEntry","updateCache","updateCacheEntries","cacheOperationType","updateCacheOpInit","updateCacheOpBegin","updateCacheOpEnd","updateCacheOpReplay","fail","message","releaseImage","rect","image","close","data","_evictUpdateCacheEntry","slot","_executeUpdateCacheInit","i","_updateCacheInsideBeginEnd","_updateCacheInitialized","_executeUpdateCacheBegin","maskBitBuf","maskState","maskCount","j","dataLength","overflow","imageWidth","imageHeight","_executeUpdateCacheEnd","offset","update","state","count","dstx","dsty","dstw","ceil","dsth","srcx","srcy","srcw","srch","availwidth","bitbuf","targetPoint","encodedMaskRect","maskLength","min","vncDecoder","_normalize","_context","drawImage","_executeUpdateCacheReplay","updateBitBuf","updateState","updateCount","_lighten","w","h","color","globalCompositeOperation","fillStyle","fillRect","operateOnCache","opcode","setImage","setVncDecoder","decoder","decodingCache","_canvas","encodingTypes","encCopyRect","encTightPNG","encUpdateCache","subEncFill","_screenBase","initScreen","p","_copyRectBlit","srcX","srcY","dstX","dstY","_backgroundContext","_backgroundCanvas","_fillRectWithColor","newStyle","canvas2dCtx","_renderImage","e","setCanvas","canvas","getContext","_backgroundCanvasObject","remove","css","position","attr","onDPIChanged","render","onRenderDone","pSrc","encoding","subEncoding","releaseRectData","setTimeout","wmksBaseService","getEventPosition","docX","docY","defaultPosition","normalizedPosition","pageX","pageY","clientX","clientY","body","scrollLeft","documentElement","scrollTop","getScreenSetting","offsetX","offsetY","window","shouldPreventDefault","specialKeys","hasSpecialKey","forEach","keyName","length","charCodeAt","extendedMonitorCtrl","$scope","$rootScope","$location","ngDialog","extendedMonitorModel","messageService","_","log","path","quit","sendMessage","type","started","exitMultimonDialog","open","templateUrl","className","title","translate","buttonLabelConfirm","buttonLabelCancel","showClose","closeByEscape","closeByDocument","scope","confirm","bind","getElementById","showCanvas","angularInited","oncontextmenu","preventDefault","responseTo","stop","extendedMonitorDetector","onLoaded","unmaxableRegions","startRender","detectTimer","noOverlap","$apply","init","sugggestMoveText","sugggestSelectText","region","getOwnRegion","updateUnmaxableRegions","availWidth","availHeight","regions","onTranslateReady","updateScopeDisplay","watchingRegionChange","JSON","stringify","isPointIn","windowHasOverlapWith","outerHeight","outerWidth","isEmpty","updateStatus","powerOn","clearResponsor","extendedMonitorDisplayer","multimonWmksService","browserSizeFactor","context","initRendering","startDisplay","responseTimer","responseInterval","$on","onDestroy","fitCanvasToScreen","showDefaultDesktop","screenBase","onDPISettingChanged","sizeFactor","screenModel","onDisplayData","setCursor","showDisplay","hideDisplay","startRedirect","onWmks","responseCheck","renderingIndeces","style","fontSize","defaultText","backgroundGradient","beginPath","createLinearGradient","addColorStop","fill","textBaseline","textAlign","font","fillText","vncRects","renderData","item","renderingIndex","push","stopRedirect","factor","display","extendedMonitorTranslationService","messageMap","onClose","origin","location","hostname","onMessage","handlers","eventOrigin","originalEvent","uid","handler","parent","postMessage","handlerIndex","indexOf","splice","setextendedMonitorModel","removeEventListener","addEventListener","random","getUid","d","Date","seed","abs","getSeconds","getMilliseconds","r","floor","replace","toString","translationMap","initCallback","inited","englishText","wmksHandler","mouseDetectionElement","cursorElement","mouseDetectionInterval","canSendMouseMove","cachedMousePosition","startWorking","wmksHandlerMap","onBlur","onMouseEvent","onMouseWheel","onMouseMove","copyProperties","getKeyEventData","onKeyEvent","clearCursor","boundWmksEvents","unboundWmksEvents","isDownEvent","bmask","button","dx","wheelDeltaX","dy","wheelDeltaY","dst","src","nameList","passableKeyEvent","keyEventData","stopPropagation","url","cursor","keyboardHandlers","keyup","keydown","keypress","mouseHandlers","mousemove","mousedown","mouseup","wheel","eventName","mouseDetectionTarget","cursorTarget","realWmksService","screenOffset","routeConfig","$routeProvider","when","template","otherwise","redirectTo"],"mappings":"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","file":"extended-monitor.cc050c0b31e6616b259f.js","sourcesContent":["/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\nimport angular from 'angular';\nimport ngRoute from 'angular-route';\nimport ngDialog from 'ng-dialog';\nimport sharedUtil from '../common/module';\n\n// All css import here\nimport '../../../styles/extended-monitor.css';\nimport '../../../styles/modal-dialogs.css';\nimport 'ngdialogCss';\n\nimport templateModule from '../../../template-module';\nimport routeConfig from './route';\nimport extendedMonitorCtrl from './extended-monitor-controller';\nimport extendedMonitorDetector from './extended-monitor-detector';\nimport extendedMonitorDisplayer from './extended-monitor-displayer';\nimport {\n   messageService,\n   extendedMonitorModel,\n   extendedMonitorTranslationService\n} from './extended-monitor-util';\nimport multimonWmksService from './multimon-wmks-service';\n\nexport default angular.module('com.vmware.vdi.htmlaccess.desktop.extendedMonitor',\n   [templateModule, ngRoute, ngDialog, sharedUtil])\n   .config(['$routeProvider', routeConfig])\n   .controller(\"extendedMonitorCtrl\", [\"$scope\",\n      \"$rootScope\",\n      \"$timeout\",\n      \"$location\",\n      \"ngDialog\",\n      \"extendedMonitorModel\",\n      \"fullscreenService\",\n      \"messageService\",\n      \"extendedMonitorTranslationService\",\n      extendedMonitorCtrl\n   ])\n   .controller(\"extendedMonitorDetector\", [\"$scope\",\n      \"$rootScope\",\n      \"$timeout\",\n      \"messageService\",\n      \"fullscreenService\",\n      \"extendedMonitorTranslationService\",\n      extendedMonitorDetector\n   ])\n   .controller(\"extendedMonitorDisplayer\", [\"$scope\",\n      \"$rootScope\",\n      \"$timeout\",\n      \"extendedMonitorModel\",\n      \"messageService\",\n      \"multimonWmksService\",\n      \"wmksBaseService\",\n      \"normalizationService\",\n      \"vncDecoder\",\n      \"extendedMonitorTranslationService\",\n      extendedMonitorDisplayer\n   ])\n   .service(\"messageService\", [\"$window\", messageService])\n   .service(\"extendedMonitorModel\", [\"messageService\", extendedMonitorModel])\n   .service(\"extendedMonitorTranslationService\", [\"messageService\",\n      extendedMonitorTranslationService])\n   .service(\"multimonWmksService\", [\"wmksBaseService\", multimonWmksService])\n   .name;\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/module.js","/*********************************************************\n * Copyright (C) 2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n\nexport default angular.module(\"com.vmware.vdi.htmlaccess.template\", []).name;\n\n\n// WEBPACK FOOTER //\n// ./template-module.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/yuez/gitvmware/htmlaccess1/ui/~/ng-dialog/css/ngDialog.css\n// module id = 20\n// module chunks = 0 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./styles/modal-dialogs.css\n// module id = 21\n// module chunks = 0 1","var path = 'common/commondialog/dialog_simple_confirm.html';\nvar html = \"<div class=\\\"dialog-title\\\">{{ngDialogData.title}}</div>\\n<div class=\\\"dialog-content\\\">\\n   <div class=\\\"session-ops-window-text\\\">{{ngDialogData.message}}</div>\\n   <div class=\\\"session-ops-window-text warning\\\" ng-show=\\\"ngDialogData.warningMessage\\\">{{ngDialogData.warningMessage}}</div>\\n</div>\\n<div class=\\\"dialog-button-row\\\" dialog-tab-scope>\\n   <button class=\\\"modal-button-base modal-button-right modal-button-blue ok-button\\\" ng-click=\\\"confirm() || closeThisDialog()\\\" id=\\\"okDialogBtn\\\" dialog-tabindex=\\\"1\\\" dialog-prevent-key-up>\\n      {{ngDialogData.buttonLabelConfirm}}\\n   </button>\\n   <button class=\\\"modal-button-base modal-button-right modal-button-grey\\\" ng-click=\\\"close() || closeThisDialog()\\\" id=\\\"cancelDialogBtn\\\" dialog-tabindex=\\\"2\\\" dialog-prevent-key-up>\\n      {{ngDialogData.buttonLabelCancel}}\\n   </button>\\n</div>\";\nwindow.angular.module('com.vmware.vdi.htmlaccess.template').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/commondialog/dialog_simple_confirm.html\n// module id = 257\n// module chunks = 1","var path = 'desktop/multimon/extended-page/extended_monitor_detector_template.html';\nvar html = \"<div ng-if=\\\"noOverlap\\\">\\n   <div id=\\\"powerOnBackground\\\" class=\\\"background-display\\\">\\n      <div id=\\\"hint-text\\\" class=\\\"suggest-text top-area\\\">{{sugggestSelectText}}</div>\\n      <button id=\\\"power-on-button\\\" type=\\\"button\\\" class=\\\"icon-button icon-select\\\" ng-click=\\\"powerOn()\\\">\\n   </div>\\n</div>\\n<div ng-if=\\\"!noOverlap\\\" class=\\\"background-display\\\">\\n   <div id=\\\"hint-text\\\" class=\\\"suggest-text central\\\">{{sugggestMoveText}}</div>\\n</div>\";\nwindow.angular.module('com.vmware.vdi.htmlaccess.template').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./desktop/multimon/extended-page/extended_monitor_detector_template.html\n// module id = 262\n// module chunks = 1","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\nimport angular from 'angular';\nimport {fullscreenSubService, fullscreenService} from './fullscreen-service';\nimport bitBuffer from './bitbuffer';\nimport renderCacheService from './render-cache-service';\nimport vncDecoder from './vnc-decoder';\nimport wmksBaseService from './wmks-base-service';\nimport normalizationService from './normalization-service';\n\n\nexport default angular.module('com.vmware.vdi.htmlaccess.desktop.sharedUtil', [])\n   .service('fullscreenSubService', ['$window', fullscreenSubService])\n   .service('bitBuffer', bitBuffer)\n   .service('renderCacheService', ['bitBuffer', renderCacheService])\n   .service('normalizationService', normalizationService)\n   .service('fullscreenService', ['$window', '$timeout', 'fullscreenSubService', fullscreenService])\n   .service('vncDecoder', ['normalizationService', 'renderCacheService', vncDecoder])\n   .service('wmksBaseService', ['$window', 'normalizationService', wmksBaseService])\n   .name;\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/module.js","/*********************************************************\n * Copyright (C) 2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * bitbuffer.js -- bitBuffer\n *\n * Service to generate bitBuffer instance.\n */\n\nexport default function bitBuffer() {\n   let BitBuffer = function(buffer, size) {\n      this._buf = buffer;\n      this._size = size;\n      this._readCount = 0;\n      this._overflow = false;\n      this._thisByte = 0;\n      this._thisByteBits = 0;\n   };\n\n   BitBuffer.prototype.readBits0 = function(val, nr) {\n      let mask;\n\n      if (this._bits < nr) {\n         this._overflow = true;\n         return -1;\n      }\n\n      mask = ~(0xff >> nr); /* ones in the lower 'nr' bits */\n      val <<= nr; /* move output value up to make space */\n      val |= (this._thisByte & mask) >> (8 - nr);\n      this._thisByte <<= nr;\n      this._thisByte &= 0xff;\n      this._thisByteBits -= nr;\n\n      return val;\n   };\n\n   BitBuffer.prototype.readBits = function(nr) {\n      let origNr = nr;\n      let val = 0;\n\n      if (this._overflow) {\n         return 0;\n      }\n\n      while (nr > this._thisByteBits) {\n         nr -= this._thisByteBits;\n         val = this.readBits0(val, this._thisByteBits);\n\n         if (this._readCount < this._size) {\n            this._thisByte = this._buf[this._readCount++];\n            this._thisByteBits = 8;\n         } else {\n            this._thisByte = 0;\n            this._thisByteBits = 0;\n            if (nr > 0) {\n               this._overflow = true;\n               return 0;\n            }\n         }\n      }\n\n      val = this.readBits0(val, nr);\n      return val;\n   };\n\n   BitBuffer.prototype.readEliasGamma = function() {\n      let l = 0;\n      let value;\n      let bit;\n      let origidx = this._readCount;\n      let origbit = this._thisByteBits;\n\n      while (!this._overflow &&\n         (bit = this.readBits(1)) === 0) {\n         l++;\n      }\n\n      value = 1 << l;\n\n      if (l) {\n         value |= this.readBits(l);\n      }\n\n      return value;\n   };\n   return {\n      newInstance: function(buffer, size) {\n         return new BitBuffer(buffer, size);\n      }\n   };\n}\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/bitbuffer.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * fullscreen-service.js -- fullscreenService\n *\n * \"sharedUtilModule\" will shared among modules.\n * functions like this and logger should also be added in this place\n * to share among all modules like for launcher, appblast, mulitmon,\n * rtav, etc...\n *\n * Service to control the fullscreen related logic, only support one\n * listener for event, and extenable to the many version.\n */\n\n\nexport function fullscreenSubService($window) {\n   this.isFullscreen = function() {\n      return !(($window.document.fullScreenElement !== undefined &&\n               $window.document.fullScreenElement === null) ||\n               ($window.document.msFullscreenElement !== undefined &&\n               $window.document.msFullscreenElement === null) ||\n               ($window.document.mozFullScreen !== undefined && !$window.document.mozFullScreen) ||\n               ($window.document.webkitIsFullScreen !== undefined &&\n               !$window.document.webkitIsFullScreen));\n   };\n\n   /**\n    * Will execute the callback when either waitTime reached or condition is\n    *    satisfied\n    * @param  {function} condition The condition function, which once return\n    *    true, will trigger the execution of callback\n    * @param  {function} callback The callback function will be processed\n    *    sooner\n    *    or later.\n    * @param  {number} waitMaxTime The max wait time in ms\n    */\n   this.waitCondition = function(condition, callback, waitMaxTime) {\n      let waitTime = waitMaxTime || 3000, //ms\n         checkInterval = 100, //ms\n         checkFunction,\n         waitTimer;\n\n      checkFunction = function() {\n         waitTime -= checkInterval;\n         if (condition() || waitTime <= 0) {\n            callback();\n            clearInterval(waitTimer);\n         }\n      };\n\n      if (condition()) {\n         callback();\n      } else {\n         waitTimer = setInterval(checkFunction, checkInterval);\n      }\n   };\n}\n\n/**\n * Control the full screen related logic, since chrome will take time to update\n * the property value on some version, add waitTime as 500ms to avoid using\n * corrupted properties.\n */\nexport function fullscreenService($window, $timeout, fullscreenSubService) {\n   let fullscreenHandler = {},\n      onFullscreenChanged,\n      isFullscreen = fullscreenSubService.isFullscreen,\n      waitCondition = fullscreenSubService.waitCondition,\n      waitTime = 500;\n\n   onFullscreenChanged = function(event) {\n      console.info(\"full screen changed\");\n      if (isFullscreen()) {\n         console.info(\"enter full screen\");\n         if (!fullscreenHandler ||\n            typeof fullscreenHandler.onEnterFullscreen !== \"function\") {\n            console.error(\"found no handler\");\n            return;\n         }\n         waitCondition(function() {\n            /**\n             * Use tolerent to avoid delay before entering fullscreen on some\n             * machines since chrome has bug on some machines to support screenX\n             * https://drafts.csswg.org/cssom-view/#dom-window-screenx\n             */\n            let tolerent = 10;\n            return screenX <= screen.availLeft + tolerent &&\n               screenY <= screen.availTop + tolerent;\n         }, function() {\n            $timeout(fullscreenHandler.onEnterFullscreen, waitTime);\n         });\n      } else {\n         console.info(\"exit full screen\");\n         if (!fullscreenHandler ||\n            typeof fullscreenHandler.onExitFullscreen !== \"function\") {\n            console.error(\"found no handler\");\n            return;\n         }\n         /**\n          * Specify the wait time here to avoid a chrome bug on \"screen\", which\n          * in corner cases violates the spec:\n          * https://developer.mozilla.org/en-US/docs/Web/API/Screen/availLeft\n          */\n         waitCondition(function() {\n            return screenX >= screen.availLeft && screenY >= screen.availTop;\n         }, fullscreenHandler.onExitFullscreen, waitTime);\n      }\n   };\n   return {\n      enterFullscreen: function(elem) {\n         if (isFullscreen()) {\n            return;\n         }\n         if (elem.requestFullScreen) {\n            elem.requestFullScreen();\n         } else if (elem.mozRequestFullScreen) {\n            elem.mozRequestFullScreen();\n         } else if (elem.webkitRequestFullscreen) {\n            elem.webkitRequestFullscreen(elem.ALLOW_KEYBOARD_INPUT);\n         } else if (elem.webkitRequestFullScreen) {\n            elem.webkitRequestFullScreen(elem.ALLOW_KEYBOARD_INPUT);\n         } else if (elem.msRequestFullscreen) {\n            elem.msRequestFullscreen();\n         } else {\n            console.error(\"fail to max the screen\");\n         }\n      },\n      exitFullscreen: function() {\n         if (isFullscreen()) {\n            if ($window.document.exitFullscreen) {\n               $window.document.exitFullscreen();\n            } else if ($window.document.msExitFullscreen) {\n               $window.document.msExitFullscreen();\n            } else if ($window.document.mozCancelFullScreen) {\n               $window.document.mozCancelFullScreen();\n            } else if ($window.document.webkitExitFullscreen) {\n               $window.document.webkitExitFullscreen();\n            } else {\n               console.error(\"fail to cancel maximizing the screen\");\n            }\n         }\n      },\n      onEnterFullscreen: function(callback) {\n         fullscreenHandler.onEnterFullscreen = callback;\n      },\n      onExitFullscreen: function(callback) {\n         fullscreenHandler.onExitFullscreen = callback;\n      },\n      bindFullScreen: function() {\n         $(document).on('webkitfullscreenchange mozfullscreenchange ' +\n            'fullscreenchange MSFullscreenChange', onFullscreenChanged);\n      },\n      unbindFullScreen: function() {\n         $(document).off('webkitfullscreenchange mozfullscreenchange ' +\n            'fullscreenchange MSFullscreenChange', onFullscreenChanged);\n      }\n   };\n}\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/fullscreen-service.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * normalization-service.js -- normalizationService\n *\n * 3+ monitor support is not added in the 17Q2\n * And only support same DPI for now, checkpoint tracking has not been adapted yet.\n */\n\nexport default function normalizationService() {\n   this._perMonitorMode = false;\n\n   this.clear = function() {\n      this._rawSetting = {};\n      this._normalizationModel = null;\n      this._normalizedSettings = {};\n      this._defaultModel = {};\n      this._agentDPI = 1.0;\n      this._DPIEnabled = true;\n   };\n   this.clear();\n\n   this.setAgentDPI = function(dpi) {\n      this._agentDPI = dpi;\n   };\n\n   /**\n    * To fully enable this, the segment mouse map is needed, which is simple but\n    * will not be done in 17q2 since we adapt the per system to reduce the\n    * chance of meeting bug 1847196 when using multimon.\n    */\n   this.setPerMonitor = function(usePerMonitor) {\n      this._perMonitorMode = !!usePerMonitor;\n   };\n\n   this.isPerMonitorMode = function() {\n      return this._perMonitorMode;\n   };\n\n   /**\n    * Returns the scale factor, which is depending the defination of \"High\n    * Resolution\" option\n    * Now using agent DPI scale, since the final design is so, and logic for\n    * single monitor also get changed accordingly.\n    */\n   this.getFactor = function(id) {\n      let baseDPI = this._rawSetting['0'].devicePixelRatio,\n         monitorDPI = this._rawSetting[id].devicePixelRatio,\n         compensateFactor = this._perMonitorMode ? 1 : monitorDPI / baseDPI,\n         clientFactor = this._DPIEnabled ? compensateFactor : monitorDPI;\n\n      return clientFactor * this._agentDPI;\n   };\n\n   /**\n    * To indicate whether the DPI Sync is enabled or not, and DPI sync here is\n    * defined as \"using client DPI scale if enabled, use native pixel if not\".\n    * @param {boolean} enabled\n    */\n   this.setDPISync = function(enabled) {\n      this._DPIEnabled = enabled;\n   };\n\n   /**\n    * Returns the param to normalize target to refer\n    * @param  {object} target\n    * @param  {object} refer\n    * @param  {object} k\n    * @return {object}\n    */\n   this._getNormalizationParam = function(target, refer, k) {\n      let param = {\n         k: k,\n         tx: refer.x - k * target.x,\n         ty: refer.y - k * target.y\n      };\n      return param;\n   };\n\n   /**\n    * After 17Q2, if want to support different DPI, the segment model should be\n    * used.\n    * @param  {object} point The source point\n    * @param  {object} model The model\n    * @return {object} This returns the point in the model\n    */\n   this.normalize = function(point, model) {\n      if (!this._defaultModel) {\n         return point;\n      }\n      if (!model) {\n         model = this._defaultModel;\n      }\n      return {\n         x: Math.round(point.x * model.k + model.tx),\n         y: Math.round(point.y * model.k + model.ty)\n      };\n   };\n\n   /**\n    * revert the point back to normal using the identical model\n    * @param  {object} point\n    * @param  {object} model\n    * @return {object}\n    */\n   this.revert = function(point, model) {\n      if (!this._defaultModel) {\n         return point;\n      }\n      if (!model) {\n         model = this._defaultModel;\n      }\n      return {\n         x: Math.round((point.x - model.tx) / model.k),\n         y: Math.round((point.y - model.ty) / model.k)\n      };\n   };\n\n   /**\n    * Since we only support 2 monitors this function need no param, and will\n    * return the stable point compare with rawSetting[0]\n    *\n    * Using this way, we will have bug 1834512, but we will not fix it for 17Q2,\n    * Using the dragging detection before entering multimon can fix it, but need\n    *    new UI and workflow.\n    *\n    * Written in the readable way instead of with the simpliest logic.\n    *\n    * @return {object} The top or left point in the line segment of the sharing\n    *    Edge.\n    */\n   this._getStablePoint = function(id) {\n      let baseId = '0',\n         isLeft = this._rawSetting[id].x + this._rawSetting[id].width <=\n         this._rawSetting[baseId].x,\n         isRight = this._rawSetting[id].x >=\n         this._rawSetting[baseId].x + this._rawSetting[baseId].width,\n         isTop = this._rawSetting[id].y + this._rawSetting[id].height <=\n         this._rawSetting[baseId].y,\n         isDown = this._rawSetting[id].y >=\n         this._rawSetting[baseId].y + this._rawSetting[baseId].height;\n\n      if (isLeft) {\n         return {\n            x: this._rawSetting[baseId].x,\n            y: Math.max(this._rawSetting[baseId].y, this._rawSetting[id].y)\n         };\n      } else if (isTop) {\n         return {\n            x: Math.max(this._rawSetting[baseId].x, this._rawSetting[id].x),\n            y: this._rawSetting[baseId].y\n         };\n      } else if (isRight) {\n         return {\n            x: this._rawSetting[id].x,\n            y: Math.max(this._rawSetting[baseId].y, this._rawSetting[id].y)\n         };\n      } else {\n         return {\n            x: Math.max(this._rawSetting[baseId].x, this._rawSetting[id].x),\n            y: this._rawSetting[id].y\n         };\n      }\n   };\n\n   /**\n    * Generate the model\n    * In 17Q2 only enable 2 monitors, or a tree grow shall be used.\n    */\n   this._generateModel = function() {\n      let key;\n      this._normalizationModel = {};\n      this._normalizationModel['0'] = this._getNormalizationParam({\n         x: this._rawSetting['0'].x,\n         y: this._rawSetting['0'].y\n      }, {\n         x: 0,\n         y: 0\n      }, this.getFactor(0));\n\n      for (key in this._rawSetting) {\n         if (this._rawSetting.hasOwnProperty(key) && key !== \"0\") {\n            let stablePoint = this._getStablePoint(key);\n            this._normalizationModel[key] = this._getNormalizationParam(stablePoint,\n               this.normalize(stablePoint, this._normalizationModel['0']),\n               this.getFactor(Number(key)));\n         }\n      }\n   };\n\n   this._calculateNormalizedSetting = function() {\n      let key,\n         startPoint;\n\n      this._normalizedSettings = {};\n      for (key in this._rawSetting) {\n         if (this._rawSetting.hasOwnProperty(key) &&\n            this._normalizationModel.hasOwnProperty(key)) {\n            startPoint = this.normalize(this._rawSetting[key], this._normalizationModel[key]);\n            this._normalizedSettings[key] = {\n               x: startPoint.x,\n               y: startPoint.y,\n               width: Math.round(this._rawSetting[key].width * this.getFactor(key)),\n               height: Math.round(this._rawSetting[key].height * this.getFactor(key)),\n               isModified: this.getFactor(key) !== 1\n            };\n         }\n      }\n   };\n\n   /**\n    * Avoid bug 1860710, since width need to be even for RDSH.\n    */\n   this._clipSettings = function () {\n      let key;\n      for (key in this._normalizedSettings) {\n         if (this._normalizedSettings.hasOwnProperty(key)) {\n            if(this._normalizedSettings[key].x % 2 !== 0){\n               this._normalizedSettings[key].x --;\n               if(this._normalizedSettings[key].width % 2 !== 0){\n                  this._normalizedSettings[key].width ++;\n               }\n            } else {\n               if(this._normalizedSettings[key].width % 2 !== 0){\n                  this._normalizedSettings[key].width --;\n               }\n            }\n         }\n      }\n   };\n\n   this.setScreenModel = function(model) {\n      this._defaultModel = model;\n   };\n\n   /**\n    * Set the raw setting gathered from browser, currently only enable for chrome\n    * @param {number} id\n    * @param {object} setting\n    */\n   this.setRawSetting = function(id, setting) {\n      this._rawSetting[id] = setting;\n   };\n\n   /**\n    * Set the raw setting gathered from browser, currently only enable for chrome\n    * @param {number} id\n    * @param {object} setting\n    */\n   this.removeRawSetting = function(id) {\n      delete this._rawSetting[id];\n   };\n\n   /**\n    * Using the previous input data to calculate and derive the model and setting\n    */\n   this.calculate = function() {\n      this._generateModel();\n      this._calculateNormalizedSetting();\n      this._clipSettings();\n   };\n\n   /**\n    * Get the derived model\n    * @return {object}\n    */\n   this.getNormalizationModel = function() {\n      return this._normalizationModel;\n   };\n\n   /**\n    * Get the derived normalized settings\n    * @return {object}\n    */\n   this.getNormalizedSettings = function() {\n      return this._normalizedSettings;\n   };\n\n   this.getSizeFactor = function(id) {\n      return this._normalizationModel[id].k;\n   };\n\n   this.isScaleMismatched = function() {\n      if (!this._rawSetting['0'] ||\n         this._rawSetting['0'].devicePixelRatio === undefined) {\n         return false;\n      }\n\n      for (let key in this._rawSetting) {\n         if (key !== '0' && this._rawSetting.hasOwnProperty(key) &&\n            this._rawSetting['0'].devicePixelRatio !==\n            this._rawSetting[key].devicePixelRatio) {\n            return true;\n         }\n      }\n      return false;\n   };\n}\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/normalization-service.js","/*********************************************************\n * Copyright (C) 2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * render-cache-service.js -- renderCacheService\n *\n * Service to handle cache for rendering.\n */\n\nexport default function renderCacheService(bitBuffer) {\n   this.decodeToCacheEntry = -1;\n   this.updateCache = [];\n   this.updateCacheEntries = 0;\n   this.cacheOperationType = {\n      updateCacheOpInit: 0,\n      updateCacheOpBegin: 1,\n      updateCacheOpEnd: 2,\n      updateCacheOpReplay: 3\n   };\n\n   this.fail = function(message) {\n      console.error(message);\n      return false;\n   };\n\n   this.releaseImage = function(rect) {\n      if (!!rect.image) {\n         if (typeof rect.image.close === \"function\") {\n            rect.image.close();\n         }\n         delete rect.image;\n      }\n      if (!!rect.data) {\n         delete rect.data;\n      }\n   };\n   /*\n    *------------------------------------------------------------------------------\n    *\n    * _evictUpdateCacheEntry\n    *\n    *    Evict one entry from the update cache.  This is done in response\n    *    to the payload of the Begin opcode as well as the destination\n    *    slot of the Begin opcode.\n    *\n    * Results:\n    *    None.\n    *\n    *------------------------------------------------------------------------------\n    */\n\n   this._evictUpdateCacheEntry = function(slot) {\n\n      this.releaseImage(this.updateCache[slot]);\n\n      this.updateCache[slot] = {};\n      this.updateCache[slot].image = null;\n   };\n\n   /*\n    *----------------------------------------------------------------------------\n    *\n    * _executeUpdateCacheInit --\n    *\n    *      Handle the UPDATE_CACHE_OP_INIT subcommand.  This resets the\n    *      cache, evicting all entries and resets the cache sizes and\n    *      flags.  The sizes and flags must be a subset of those which\n    *      the client advertised in the capability packet.\n    *\n    * Results:\n    *      None.\n    *\n    * Side effects:\n    *      Resets update cache.\n    *\n    *----------------------------------------------------------------------------\n    */\n\n   this._executeUpdateCacheInit = function(rect) {\n      let i;\n\n      for (i = 0; i < this.updateCacheEntries; i++) {\n         this._evictUpdateCacheEntry(i);\n      }\n\n      this.updateCache = [];\n      this.updateCacheEntries = rect.updateCacheEntries;\n\n      for (i = 0; i < this.updateCacheEntries; i++) {\n         this.updateCache[i] = {};\n         this.updateCache[i].image = null;\n      }\n   };\n\n\n   /*\n    *----------------------------------------------------------------------------\n    *\n    * _updateCacheInsideBeginEnd --\n    *\n    *      Returns true if the decoder has received in the current\n    *      framebuffer update message a VNC_UPDATECACHE_OP_BEGIN message\n    *      but not yet received the corresponding OP_END.\n    *\n    * Side effects:\n    *      None.\n    *\n    *----------------------------------------------------------------------------\n    */\n\n   this._updateCacheInsideBeginEnd = function() {\n      return this.decodeToCacheEntry !== -1;\n   };\n\n\n   /*\n    *----------------------------------------------------------------------------\n    *\n    * _updateCacheInitialized --\n    *\n    *      Returns true if the decoder has been configured to have an\n    *      active UpdateCache and the cache size negotiation has\n    *      completed..\n    *\n    * Side effects:\n    *      None.\n    *\n    *----------------------------------------------------------------------------\n    */\n\n   this._updateCacheInitialized = function() {\n      return this.updateCacheEntries !== 0;\n   };\n\n\n   /*\n    *----------------------------------------------------------------------------\n    *\n    * _executeUpdateCacheBegin --\n    *\n    *      Handle the UPDATE_CACHE_OP_BEGIN subcommand.  Process the\n    *      message payload, which is a mask of cache entries to evict.\n    *      Evict any existing entry at the destination slot, and create a\n    *      new entry there.\n    *\n    * Results:\n    *      None.\n    *\n    * Side effects:\n    *      Evicts elements of the update cache.\n    *      Creates a new cache entry.\n    *\n    *----------------------------------------------------------------------------\n    */\n\n   this._executeUpdateCacheBegin = function(rect) {\n      let maskBitBuf,\n         maskState, maskCount,\n         i, j;\n\n      if (!this._updateCacheInitialized()) {\n         return false;\n      }\n\n      if (this._updateCacheInsideBeginEnd() ||\n         rect.slot >= this.updateCacheEntries) {\n         return this.fail(\"error: cache status wrong for cache begin\");\n      }\n\n      maskBitBuf = bitBuffer.newInstance(rect.data, rect.dataLength);\n      maskState = !maskBitBuf.readBits(1);\n      maskCount = 0;\n      j = 0;\n\n      do {\n         maskCount = maskBitBuf.readEliasGamma();\n         maskState = !maskState;\n\n         if (maskState) {\n            for (i = 0; i < maskCount && i < this.updateCacheEntries; i++) {\n               this._evictUpdateCacheEntry(i + j);\n            }\n         }\n\n         j += maskCount;\n      } while (j < this.updateCacheEntries && !maskBitBuf.overflow);\n\n\n      this.decodeToCacheEntry = rect.slot;\n      this._evictUpdateCacheEntry(rect.slot);\n\n      this.updateCache[this.decodeToCacheEntry].imageWidth = rect.width;\n      this.updateCache[this.decodeToCacheEntry].imageHeight = rect.height;\n      return true;\n   };\n\n\n   /*\n    *----------------------------------------------------------------------------\n    *\n    * _executeUpdateCacheEnd --\n    *\n    *      Handle the UPDATE_CACHE_OP_END subcommand.  Process the\n    *      message payload, which is a serialized bitmask of screen\n    *      regions to scatter the update image to.\n    *\n    * Results:\n    *      None.\n    *\n    * Side effects:\n    *      Draws to the canvas.\n    *\n    *----------------------------------------------------------------------------\n    */\n   this._executeUpdateCacheEnd = function(rect, offset) {\n      if (!this._updateCacheInitialized()) {\n         return false;\n      }\n      if (!this._updateCacheInsideBeginEnd()) {\n         return this.fail(\"error: cache status wrong for cache end\");\n      }\n      let update = this.updateCache[this.decodeToCacheEntry],\n         state, count,\n         dstx = 0,\n         dsty = 0,\n         dstw = Math.ceil(rect.width / 16),\n         dsth = Math.ceil(rect.height / 16),\n         srcx = 0,\n         srcy = 0,\n         srcw = update.imageWidth / 16,\n         srch = update.imageHeight / 16,\n         availwidth,\n         bitbuf,\n         targetPoint;\n\n      if (!this._updateCacheInitialized() ||\n         !this._updateCacheInsideBeginEnd() ||\n         rect.slot !== this.decodeToCacheEntry ||\n         rect.slot >= this.updateCacheEntries) {\n         return this.fail(\"error: requested cache slot invalid\");\n      }\n\n      update.encodedMaskRect = {\n         x: rect.x,\n         y: rect.y,\n         width: rect.width,\n         height: rect.height\n      };\n      update.mask = rect.data;\n      update.maskLength = rect.dataLength;\n\n      bitbuf = bitBuffer.newInstance(update.mask, update.maskLength);\n      state = !bitbuf.readBits(1);\n      count = 0;\n\n\n      do {\n         if (count === 0) {\n            count = bitbuf.readEliasGamma();\n            state = !state;\n         }\n\n         availwidth = Math.min(srcw - srcx, dstw - dstx);\n         availwidth = Math.min(availwidth, count);\n\n         if (state) {\n            targetPoint = this.vncDecoder._normalize({\n               x: rect.x + dstx * 16,\n               y: rect.y + dsty * 16\n            }, offset);\n            // Don't worry if we don't have a full 16-wide mcu at the\n            // screen edge.  The canvas will trim the drawImage\n            // coordinates for us.\n            //\n            this.vncDecoder._context.drawImage(update.image,\n               srcx * 16,\n               srcy * 16,\n               availwidth * 16, 16,\n               targetPoint.x,\n               targetPoint.y,\n               availwidth * 16, 16);\n\n            srcx += availwidth;\n            if (srcx === srcw) {\n               srcx = 0;\n               srcy++;\n            }\n         }\n\n         dstx += availwidth;\n         if (dstx === dstw) {\n            dstx = 0;\n            dsty++;\n         }\n\n         count -= availwidth;\n\n      } while (dsty < dsth && !bitbuf._overflow);\n\n      this.decodeToCacheEntry = -1;\n      return true;\n   };\n\n\n   /*\n    *----------------------------------------------------------------------------\n    *\n    * _executeUpdateCacheReplay --\n    *\n    *      Handle the UPDATE_CACHE_OP_REPLAY subcommand.  Process the\n    *      message payload, which is a serialized mask used to subset the\n    *      bitmask provided at the time the cache entry being replayed\n    *      was created.  Scatters the specified subset of the cached\n    *      image to the canvas.\n    *\n    * Results:\n    *      None.\n    *\n    * Side effects:\n    *      Draws to the canvas.\n    *\n    *----------------------------------------------------------------------------\n    */\n\n   this._executeUpdateCacheReplay = function(rect, offset) {\n      if (!this._updateCacheInitialized()) {\n         return false;\n      }\n\n      if (rect.slot >= this.updateCacheEntries) {\n         return this.fail(\"error: requested cache slot invalid\");\n      }\n\n      if (!this.updateCache[rect.slot] ||\n         !this.updateCache[rect.slot].encodedMaskRect) {\n         return this.fail(\"error: requested cache slot data invalid\");\n      }\n\n      let update = this.updateCache[rect.slot],\n         encodedMaskRect = this.updateCache[rect.slot].encodedMaskRect,\n         dstx = 0,\n         dsty = 0,\n         dstw = Math.ceil(encodedMaskRect.width / 16),\n         dsth = Math.ceil(encodedMaskRect.height / 16),\n         availwidth,\n         srcx = 0,\n         srcy = 0,\n         srcw = update.imageWidth / 16,\n         srch = update.imageHeight / 16,\n         targetPoint,\n         maskBitBuf = bitBuffer.newInstance(rect.data, rect.dataLength),\n         updateBitBuf = bitBuffer.newInstance(update.mask, update.maskLength),\n         updateState = !updateBitBuf.readBits(1),\n         updateCount = 0,\n         maskState = !maskBitBuf.readBits(1),\n         maskCount = 0;\n\n      if (!this._updateCacheInitialized() ||\n         this._updateCacheInsideBeginEnd() ||\n         rect.slot >= this.updateCacheEntries) {\n         return this.fail(\"\");\n      }\n\n      do {\n         if (updateCount === 0) {\n            updateCount = updateBitBuf.readEliasGamma();\n            updateState = !updateState;\n         }\n         if (maskCount === 0) {\n            maskCount = maskBitBuf.readEliasGamma();\n            maskState = !maskState;\n         }\n\n         availwidth = dstw - dstx;\n         availwidth = Math.min(availwidth, updateCount);\n\n         if (updateState) {\n            availwidth = Math.min(availwidth, srcw - srcx);\n            availwidth = Math.min(availwidth, maskCount);\n\n            if (maskState) {\n               targetPoint = this.vncDecoder._normalize({\n                  x: encodedMaskRect.x + dstx * 16,\n                  y: encodedMaskRect.y + dsty * 16\n               }, offset);\n               // Don't worry if the right/bottom blocks are not\n               // 16-pixel, the canvas will trim the drawImage dimesions\n               // for us.\n               if (true) {\n                  this.vncDecoder._context.drawImage(update.image,\n                     srcx * 16,\n                     srcy * 16,\n                     availwidth * 16, 16,\n                     targetPoint.x,\n                     targetPoint.y,\n                     availwidth * 16, 16);\n\n               }\n\n               if (false) {\n                  this._lighten(targetPoint.x,\n                     targetPoint.y,\n                     availwidth * 16, 16,\n                     \"red\");\n               }\n            }\n\n            srcx += availwidth;\n            if (srcx === srcw) {\n               srcx = 0;\n               srcy++;\n            }\n\n            maskCount -= availwidth;\n         }\n\n         dstx += availwidth;\n         if (dstx === dstw) {\n            dstx = 0;\n            dsty++;\n         }\n\n         updateCount -= availwidth;\n\n      } while (dsty < dsth &&\n      !maskBitBuf._overflow &&\n      !updateBitBuf._overflow);\n      return true;\n   };\n\n   this._lighten = function(x, y, w, h, color) {\n      this.vncDecoder._context.globalCompositeOperation = \"lighten\";\n      this.vncDecoder._context.fillStyle = color;\n      this.vncDecoder._context.fillRect(x, y, w, h);\n      this.vncDecoder._context.globalCompositeOperation = \"source-over\";\n   };\n\n   /*\n    *------------------------------------------------------------------------------\n    *\n    * _executeUpdateCacheReplay\n    *\n    *    Dispatch the updateCache commands according to their opcode.\n    *    data is in various length as maskLength\n    *\n    * Results:\n    *    None.\n    *\n    * Side Effects:\n    *    None.\n    *\n    *------------------------------------------------------------------------------\n    */\n\n   this.operateOnCache = function(rect, offset) {\n      switch (rect.opcode) {\n         case this.cacheOperationType.updateCacheOpInit:\n            this._executeUpdateCacheInit(rect);\n            break;\n         case this.cacheOperationType.updateCacheOpBegin:\n            this._executeUpdateCacheBegin(rect);\n            break;\n         case this.cacheOperationType.updateCacheOpEnd:\n            this._executeUpdateCacheEnd(rect, offset);\n            break;\n         case this.cacheOperationType.updateCacheOpReplay:\n            this._executeUpdateCacheReplay(rect, offset);\n            break;\n         default:\n            return this.fail(\"error: requested cache opcode invalid\");\n      }\n   };\n   this.setImage = function(rect) {\n      this.updateCache[this.decodeToCacheEntry].image = rect.image;\n   };\n   this.setVncDecoder = function(decoder) {\n      this.vncDecoder = decoder;\n   };\n   this.decodingCache = function() {\n      return this.decodeToCacheEntry !== -1;\n   };\n}\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/render-cache-service.js","/*********************************************************\n * Copyright (C) 2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * vnc-decoder.js -- vncDecoder\n *\n * Service to get a VNC decoder\n * This file is needed since we want to fix bug 1797231 and unblock the release\n * of multimon feature, so the changes that should be done in 17Q2 after\n * completing the split of the vnc decoder from the wmks is move in 17Q1, thus\n * this file is incompleted and reduandant with the one in the wmks.\n *\n * In another words, the one in wmks will work for single monitor as before,\n * while this one will work for multimon, and we plan to merger them later.\n *\n * And why this can fix the crash issue is for we pass the non-rendered VNC messages\n * around instead of the whole screen image, which save a lot of memory alloc\n * and free.\n */\n\nexport default function vncDecoder(normalizationService, renderCacheService) {\n   this._canvas = null;\n   this._context = null;\n   this.encodingTypes = {\n      encCopyRect: 0x01,\n      encTightPNG: -260,\n      encUpdateCache: 127 + 0x574d5600,\n      //sub encodings\n      subEncFill: 0x80\n   };\n\n   this._screenBase = {\n      x: 0,\n      y: 0\n   };\n\n   /**\n    * Chrome on some windows machine has bug, e.g. the screenX, screenY on the\n    * problem machine return 3844, 1924 after using fullscreen, while the true\n    * value on the system setting is 3840 and 1920\n    * use Math.min(screen.availLeft, screeX) to bypass come this bug according\n    * to spec:\n    * https://drafts.csswg.org/cssom-view/#dom-window-screenx\n    */\n   this.initScreen = function() {\n      if (screen.availLeft !== undefined && screen.availTop !== undefined) {\n         this._screenBase = normalizationService.normalize({\n            x: Math.min(screenX, screen.availLeft),\n            y: Math.min(screenY, screen.availTop)\n         });\n      } else {\n         this._screenBase = normalizationService.normalize({\n            x: screenX,\n            y: screenY\n         });\n      }\n   };\n\n   this._normalize = function(p, offset) {\n      return {\n         x: p.x - offset.x - this._screenBase.x,\n         y: p.y - offset.y - this._screenBase.y\n      };\n   };\n\n   this._copyRectBlit = function(srcX, srcY, width, height, dstX, dstY) {\n      this._backgroundContext.drawImage(this._canvas,\n         srcX, srcY,\n         width, height,\n         srcX, srcY,\n         width, height);\n      this._context.drawImage(this._backgroundCanvas,\n         srcX, srcY,\n         width, height,\n         dstX, dstY,\n         width, height);\n   };\n\n   this._fillRectWithColor = function(x, y, width, height, color) {\n      let newStyle,\n         canvas2dCtx = this._context;\n      newStyle = \"rgb(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \")\";\n      canvas2dCtx.fillStyle = newStyle;\n      canvas2dCtx.fillRect(x, y, width, height);\n   };\n\n   this._renderImage = function(rect, offset) {\n      var p = this._normalize({\n         x: rect.x,\n         y: rect.y\n      }, offset);\n      try {\n         this._context.drawImage(rect.image,\n            p.x,\n            p.y);\n      } catch (e) {\n         console.error(e);\n      }\n   };\n\n   this.setCanvas = function(canvas) {\n      let size = {\n         width: canvas.width,\n         height: canvas.height\n      };\n      this._canvas = canvas;\n      this._context = this._canvas.getContext('2d');\n      if (!!this._backgroundCanvasObject) {\n         this._backgroundCanvasObject.remove();\n      }\n      this._backgroundCanvasObject = $('<canvas/>').css({\n         position: 'absolute'\n      });\n      this._backgroundCanvasObject.attr(size).css(size);\n      this._backgroundCanvas = this._backgroundCanvasObject[0];\n      this._backgroundContext = this._backgroundCanvas.getContext('2d');\n      renderCacheService.setVncDecoder(this);\n   };\n\n   this.onDPIChanged = function(canvas) {\n      var size = {\n         width: canvas.width,\n         height: canvas.height\n      };\n      this._backgroundCanvasObject.attr(size);\n   };\n\n   /**\n    * The function to render a rect, which include a special one as End of Frame\n    *    indicate the end of async rendering is done.\n    * @param  {object} rect The object including data\n    * @param  {object} offset The screen offset information\n    * @param  {function} onRenderDone The callback for finish rendering, accept no param\n    */\n   this.render = function(rect, offset, onRenderDone) {\n      var pSrc,\n         p;\n      switch (rect.encoding) {\n         case this.encodingTypes.encCopyRect:\n            pSrc = this._normalize({\n               x: rect.srcX,\n               y: rect.srcY\n            }, offset);\n            p = this._normalize({\n               x: rect.x,\n               y: rect.y\n            }, offset);\n            this._copyRectBlit(pSrc.x,\n               pSrc.y,\n               rect.width,\n               rect.height,\n               p.x,\n               p.y);\n            break;\n         case this.encodingTypes.encTightPNG:\n            if (rect.subEncoding === this.encodingTypes.subEncFill) {\n               p = this._normalize({\n                  x: rect.x,\n                  y: rect.y\n               }, offset);\n               this._fillRectWithColor(p.x,\n                  p.y,\n                  rect.width,\n                  rect.height,\n                  rect.color);\n            } else if (renderCacheService.decodingCache()) {\n               renderCacheService.setImage(rect, offset);\n            } else {\n               this._renderImage(rect, offset);\n               this.releaseRectData(rect);\n            }\n            break;\n         case this.encodingTypes.encUpdateCache:\n            renderCacheService.operateOnCache(rect, offset);\n            break;\n         default:\n            /**\n             * can't use Logger since the commen Logger service is still not\n             * completed after page merging\n             */\n            console.error(\"unsupported encoding type found for multimon\");\n            break;\n      }\n\n      /**\n       * similar timeout also exist in wmks to allow canvas to render, and\n       * here it's mainly for GC\n       */\n      setTimeout(onRenderDone, 1);\n   };\n\n   this.releaseRectData = renderCacheService.releaseImage;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/vnc-decoder.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * wmks-base-service.js -- wmksBaseService\n *\n * This hold the getEventPosition function, which currently not support retina,\n * later would add more logic and function in.\n */\n\nexport default function wmksBaseService($window, normalizationService) {\n   this.getEventPosition = function(event, offset) {\n      let docX, docY,\n         defaultPosition = {\n            x: 0,\n            y: 0\n         },\n         normalizedPosition;\n\n      if (!offset || !event) {\n         return defaultPosition;\n      }\n      if (event.pageX || event.pageY) {\n         docX = event.pageX;\n         docY = event.pageY;\n      } else if (event.clientX || event.clientY) {\n         docX = (event.clientX +\n            document.body.scrollLeft +\n            document.documentElement.scrollLeft);\n         docY = (event.clientY +\n            document.body.scrollTop +\n            document.documentElement.scrollTop);\n      } else {\n         return defaultPosition;\n      }\n      normalizedPosition = normalizationService.normalize({\n         x: docX + screenX,\n         y: docY + screenY\n      });\n      return {\n         x: normalizedPosition.x + offset.x,\n         y: normalizedPosition.y + offset.y\n      };\n   };\n   /**\n    * Add this workaround check to avoid a bug happens by chance of\n    * wrong screenX, where the offset is added with a extra number,\n    * and the availLeft is correct when this bug happens without the\n    * positive extra offset. so when screen.availLeft exist, use min\n    * of both should fix it.\n    *\n    * On the spec, the screenX should never be smaller than the\n    * screen.availLeft, please refer the definition in:\n    * https://drafts.csswg.org/cssom-view/#dom-window-screenx\n    * as \"The screenX attribute must return the x-coordinate of the position\n    * where the event occurred relative to the origin of the Web-exposed\n    * screen area.\"\n    * And after entering fullscreen, they should be equal to each other, if\n    * the browser don't count the windows/Mac OS bar in.\n    */\n   this.getScreenSetting = function() {\n      let offsetX,\n         offsetY;\n\n      if (!screen || screenX === undefined || screenY === undefined) {\n         return {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n            devicePixelRatio: window.devicePixelRatio || 1\n         };\n      }\n      if (screen.availLeft !== undefined) {\n         offsetX = Math.min(screenX, screen.availLeft);\n      } else {\n         offsetX = screenX;\n      }\n      if (screen.availTop !== undefined) {\n         offsetY = Math.min(screenY, screen.availTop);\n      } else {\n         offsetY = screenY;\n      }\n\n      return {\n         x: offsetX,\n         y: offsetY,\n         width: screen.width,\n         height: screen.height,\n         devicePixelRatio: window.devicePixelRatio || 1\n      };\n   };\n\n   /**\n    * whether should prevent default\n    * @param {object} event\n    */\n   this.shouldPreventDefault = function(event) {\n      if (!event) {\n         return false;\n      }\n      let specialKeys = [\"meta\", \"ctrl\", \"alt\", \"shift\"];\n      let hasSpecialKey = false;\n      specialKeys.forEach((keyName) => {\n         if (event[keyName + \"Key\"]) {\n            hasSpecialKey = true;\n         }\n      });\n      /**\n       * 65 is A, 90 is Z, add this condition for avoiding bug 1821196\n       */\n      return !(!!event.key && event.key.length === 1 &&\n            event.key.charCodeAt(0) >= 65 && event.key.charCodeAt(0) <= 90) ||\n          hasSpecialKey;\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/common/wmks-base-service.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * extended-monitor-controller.js -- extendedMonitorCtrl\n */\n\nimport simpleConfirmTemplate from '../../../common/commondialog/dialog_simple_confirm.html';\n\nexport default function extendedMonitorCtrl($scope, $rootScope, $timeout,\n                                            $location, ngDialog,\n                                            extendedMonitorModel,\n                                            fullscreenService, messageService,\n                                            _) {\n   this.onEnterFullscreen = function() {\n      $timeout(function() {\n         extendedMonitorModel.isFullscreen = true;\n         console.log(\"jump to display page\");\n         $location.path(\"/display\");\n      });\n   };\n\n   this.quit = function() {\n      fullscreenService.unbindFullScreen();\n      $timeout(function() {\n         messageService.sendMessage({\n            type: \"confirmedClose\"\n         });\n      });\n   };\n\n   /**\n    * Don't allow to close dialog by esc since this dialog can be triggered\n    *    by it.\n    */\n   this.onExitFullscreen = function() {\n      if (extendedMonitorModel.started) {\n\n         $scope.exitMultimonDialog = ngDialog.open({\n            name: \"QuitMultimon\",\n            templateUrl: simpleConfirmTemplate,\n            className: \"session-ops-dialog\",\n            data: {\n               title: _.translate(\"MM_QUIT_MULTIMON_T\"),\n               message: _.translate(\"MM_QUIT_MULTIMON_M\"),\n               buttonLabelConfirm: _.translate(\"OK\"),\n               buttonLabelCancel: _.translate(\"CANCEL\"),\n            },\n            showClose: false,\n            closeByEscape: false,\n            closeByDocument: false,\n            scope: (function() {\n               $scope.confirm = function() {\n                  $scope.exitMultimonDialog.close();\n                  this.quit();\n               }.bind(this);\n               $scope.close = function() {\n                  let canvas = document.getElementById(\"extendedCanvas\");\n\n                  $scope.exitMultimonDialog.close();\n                  if (!canvas) {\n                     this.quit();\n                  }\n                  fullscreenService.enterFullscreen(canvas);\n               }.bind(this);\n               return $scope;\n            }.bind(this)())\n         });\n      } else {\n         $timeout(function() {\n            extendedMonitorModel.isFullscreen = false;\n            console.log(\"jump to back when not in fullscreen\");\n            $location.path(\"/detect\");\n         });\n      }\n   }.bind(this);\n\n   fullscreenService.onEnterFullscreen(this.onEnterFullscreen);\n   fullscreenService.onExitFullscreen(this.onExitFullscreen);\n   fullscreenService.bindFullScreen();\n\n   $rootScope.showCanvas = false;\n   $rootScope.angularInited = true;\n   document.oncontextmenu = function(e) {\n      e.preventDefault();\n   };\n\n   messageService.responseTo(\"forcibleClose\", function(data) {\n      messageService.stop();\n      $timeout(function() {\n         window.open('location', '_self', '');\n         window.close();\n      });\n   });\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/extended-monitor-controller.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * extended-monitor-detector.js -- extendedMonitorDetector\n *\n * Module to gather the display information and trigger fullscreen\n *\n * The UI part is enough for working, and could be better, which is low priority\n * to be done in later patches\n */\n\nexport default function extendedMonitorDetector($scope, $rootScope, $timeout,\n                                                messageService,\n                                                fullscreenService, _) {\n   this.onLoaded = function() {\n      this.unmaxableRegions = {\n         0: null\n      };\n      this.startRender = false;\n      this.detectTimer = null;\n      $timeout(function() {\n         let canvas = document.getElementById(\"extendedCanvas\");\n         if (!canvas) {\n            return;\n         }\n         canvas.width = 0;\n         canvas.height = 0;\n         $rootScope.showCanvas = false;\n         $scope.noOverlap = false;\n         $scope.$apply();\n         messageService.sendMessage({\n            type: \"ready\"\n         });\n         messageService.responseTo(\"init\", this.init);\n      }.bind(this));\n   }.bind(this);\n\n   this.init = function() {\n      $scope.sugggestMoveText = _.translate(\"MM_HINT_MOVE\");\n      $scope.sugggestSelectText = _.translate(\"MM_SELECT_MONITOR\");\n      document.title = _.translate(\"MM_MONITOR_DETECTOR\");\n      this.region = this.getOwnRegion();\n      messageService.responseTo(\"updateUnmaxableRegions\",\n         this.updateUnmaxableRegions);\n      messageService.sendMessage({\n         type: \"setUnmaxableRegion\",\n         data: {\n            region: this.region\n         }\n      });\n      messageService.sendMessage({\n         type: \"initDone\"\n      });\n   }.bind(this);\n\n   this.getOwnRegion = function() {\n      return {\n         x: screen.availLeft,\n         y: screen.availTop,\n         width: screen.availWidth,\n         height: screen.availHeight\n      };\n   };\n\n   this.updateUnmaxableRegions = function(data) {\n      this.unmaxableRegions = data.regions;\n      _.onTranslateReady(this.updateScopeDisplay);\n   }.bind(this);\n\n   this.watchingRegionChange = function() {\n      if (!!this.detectTimer) {\n         console.error(\"time has already being inited\");\n         return;\n      }\n      this.detectTimer = setInterval(function() {\n         if (JSON.stringify(this.region) !==\n            JSON.stringify(this.getOwnRegion())) {\n            this.region = this.getOwnRegion();\n            messageService.sendMessage({\n               type: \"setUnmaxableRegion\",\n               data: {\n                  region: this.region\n               }\n            });\n         }\n         _.onTranslateReady(this.updateScopeDisplay);\n      }.bind(this), 500);\n   }.bind(this);\n\n   this.isPointIn = function(p, rect) {\n      return (p.x >= rect.x && p.x <= rect.x + rect.width) &&\n         (p.y >= rect.y && p.y <= rect.y + rect.height);\n   };\n\n   this.windowHasOverlapWith = function(rect) {\n      // if can decide treat as no overlap and clickable\n      if (screenX === undefined || screenY === undefined ||\n         window.outerHeight === undefined || window.outerWidth === undefined) {\n         return false;\n      }\n      return this.isPointIn({\n            x: screenX,\n            y: screenY\n         }, rect) || this.isPointIn({\n            x: screenX,\n            y: screenY + window.outerHeight\n         }, rect) ||\n         this.isPointIn({\n            x: screenX + window.outerWidth,\n            y: screenY\n         }, rect) || this.isPointIn({\n            x: screenX + window.outerWidth,\n            y: screenY + window.outerHeight\n         }, rect);\n   }.bind(this);\n\n   this.noOverlap = function() {\n      let key,\n         isEmpty = true;\n      for (key in this.unmaxableRegions) {\n         if (this.unmaxableRegions.hasOwnProperty(key)) {\n            isEmpty = false;\n            if (this.windowHasOverlapWith(this.unmaxableRegions[key])) {\n               return false;\n            }\n         }\n      }\n      return !isEmpty;\n   }.bind(this);\n\n   this.updateStatus = function() {\n      $scope.noOverlap = this.noOverlap();\n      $scope.$apply();\n   };\n\n   this.updateScopeDisplay = function() {\n      if (!this.startRender) {\n         this.startRender = true;\n         this.watchingRegionChange();\n         this.updateStatus();\n      } else {\n         if ($scope.noOverlap !== this.noOverlap()) {\n            this.updateStatus();\n         }\n      }\n   }.bind(this);\n\n   /**\n    * Click handler when user click the power on button\n    * will clearup and jump\n    */\n   $scope.powerOn = function() {\n      let canvas;\n\n      if (!this.startRender) {\n         return;\n      }\n      if (!!this.detectTimer) {\n         clearInterval(this.detectTimer);\n      }\n      canvas = document.getElementById(\"extendedCanvas\");\n      if (!canvas) {\n         return;\n      }\n      this.detectTimer = null;\n      messageService.clearResponsor(\"updateUnmaxableRegions\");\n      fullscreenService.enterFullscreen(canvas);\n   }.bind(this);\n\n   this.onLoaded();\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/extended-monitor-detector.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * extended-monitor-displayer.js -- extendedMonitorDisplayer\n *\n * Module to control all extended monitors inside the new page\n *\n */\n\nexport default function extendedMonitorDisplayer($scope, $rootScope, $timeout,\n   extendedMonitorModel,\n   messageService,\n   multimonWmksService,\n   wmksBaseService,\n   normalizationService,\n   vncDecoder,\n   _) {\n   this.init = function() {\n      this.canvas = document.getElementById(\"extendedCanvas\");\n      if (!this.canvas) {\n         return;\n      }\n      this.browserSizeFactor = 1;\n      this.context = this.canvas.getContext(\"2d\");\n      _.onTranslateReady(this.initRendering);\n      messageService.responseTo(\"startDisplay\", this.startDisplay);\n      $timeout(function() {\n         messageService.sendMessage({\n            type: \"readyToDisplay\",\n            data: {\n               region: wmksBaseService.getScreenSetting()\n            }\n         });\n      });\n      this.responseTimer = null;\n      this.responseInterval = 100;\n      $scope.$on(\"$destroy\", this.onDestroy);\n   };\n\n   this.initRendering = function() {\n      this.fitCanvasToScreen();\n      vncDecoder.setCanvas(this.canvas);\n      this.showDefaultDesktop();\n   }.bind(this);\n\n   this.startDisplay = function(data) {\n      this.offset = {\n         x: data.screenBase.x,\n         y: data.screenBase.y\n      };\n      this.onDPISettingChanged(data.sizeFactor);\n      normalizationService.setScreenModel(data.screenModel);\n      messageService.responseTo(\"display\", this.onDisplayData);\n      messageService.responseTo(\"setCursor\", multimonWmksService.setCursor);\n      messageService.responseTo(\"showDisplay\", this.showDisplay);\n      messageService.responseTo(\"hideDisplay\", this.hideDisplay);\n      multimonWmksService.startRedirect(document, this.canvas, {\n         onWmks: messageService.sendMessage.bind(messageService)\n      }, this.offset);\n      extendedMonitorModel.started = true;\n      if (!!this.responseTimer) {\n         clearInterval(this.responseTimer);\n      }\n      this.responseTimer = setInterval(this.responseCheck, this.responseInterval);\n      this.renderingIndeces = [];\n      vncDecoder.initScreen();\n   }.bind(this);\n\n   /**\n    * fit the this.canvas to the size of screen\n    */\n   this.fitCanvasToScreen = function() {\n      this.canvas.style.width = screen.width + 'px';\n      this.canvas.style.height = screen.height + 'px';\n      this.canvas.width = screen.width * this.browserSizeFactor;\n      this.canvas.height = screen.height * this.browserSizeFactor;\n   };\n\n   /**\n    * displaying default desktop before getting any data to display\n    */\n   this.showDefaultDesktop = function() {\n      let fontSize,\n         defaultText,\n         backgroundGradient;\n\n      $rootScope.showCanvas = true;\n      fontSize = Math.min(40, this.canvas.width / 25);\n      defaultText = _.translate(\"MM_WAIT_OTHER_MONITOR_READY\");\n\n      this.context.beginPath();\n      this.context.rect(0, 0, this.canvas.width, this.canvas.height);\n      backgroundGradient = this.context.createLinearGradient(0, 0, 0,\n         2 * this.canvas.height);\n      backgroundGradient.addColorStop(0, \"black\");\n      backgroundGradient.addColorStop(1, \"white\");\n      this.context.fillStyle = backgroundGradient;\n      this.context.fill();\n      this.context.textBaseline = \"middle\";\n      this.context.textAlign = \"center\";\n      this.context.font = fontSize + \"px Georgia\";\n      this.context.fillStyle = \"#FFFFFF\";\n      this.context.fillText(defaultText, this.canvas.width / 2,\n         this.canvas.height / 2);\n      $timeout(function() {\n         $scope.$apply();\n      });\n   };\n\n   /**\n    * Callback when getting displaying data, use in this way to trigger\n    * rendering timing as we expected.\n    * @param  {object} vncRects The array contains VNC data\n    */\n   this.onDisplayData = function(vncRects) {\n      vncRects.forEach(item => {\n         this.renderData(item);\n      });\n   }.bind(this);\n\n   this.responseCheck = function() {\n      if (this.renderingIndeces.length > 0) {\n         messageService.sendMessage({\n            type: \"renderingDone\",\n            renderingIndeces: this.renderingIndeces\n         });\n         this.renderingIndeces = [];\n      }\n   }.bind(this);\n\n   /**\n    * Udpate according to the the displaying data\n    * @param  {object} data The object contains VNC data\n    */\n   this.renderData = function(data) {\n      let rect = data.rect,\n         renderingIndex = data.renderingIndex;\n\n      vncDecoder.render(rect, this.offset, () => {\n         this.renderingIndeces.push(renderingIndex);\n      });\n   };\n\n   /**\n    * clear up when leaving this scope\n    */\n   this.onDestroy = function() {\n      messageService.clearResponsor(\"display\");\n      messageService.clearResponsor(\"setCursor\");\n      messageService.clearResponsor(\"startDisplay\");\n      messageService.clearResponsor(\"showDisplay\");\n      messageService.clearResponsor(\"hideDisplay\");\n      multimonWmksService.stopRedirect();\n      extendedMonitorModel.started = false;\n   };\n   this.init();\n\n   /**\n    * factor might be dpi_b or dpi_a*dpi_b\n    * @param  {[type]} factor [description]\n    * @return {[type]}        [description]\n    */\n   this.onDPISettingChanged = function(factor) {\n      this.browserSizeFactor = factor;\n      if (this.canvas.width !== screen.width * this.browserSizeFactor ||\n         this.canvas.height !== screen.height * this.browserSizeFactor) {\n         this.canvas.width = screen.width * this.browserSizeFactor;\n         this.canvas.height = screen.height * this.browserSizeFactor;\n         vncDecoder.onDPIChanged(this.canvas);\n      }\n   };\n\n   this.showDisplay = function() {\n      this.canvas.style.display = \"\";\n   };\n\n   this.hideDisplay = function() {\n      this.canvas.style.display = \"none\";\n   };\n}\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/extended-monitor-displayer.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * extended-monitor-util.js -- messageService extendedMonitorModel\n * extendedMonitorTranslationService\n *\n * \"multimonModule\" is for multimon codes\n * Define those services and model that shared among controllers to decouple.\n */\n\nexport function messageService($window) {\n   let messageMap = {},\n      extendedMonitorModel = null,\n      service,\n      onClose,\n      origin = \"https://\" + $window.location.hostname,\n\n      onMessage = function(event) {\n         let data = event.data,\n            i,\n            handlers,\n            eventOrigin = event.origin || event.originalEvent.origin;\n\n         if (eventOrigin !== origin) {\n            return;\n         }\n         if (data.uid !== extendedMonitorModel.uid) {\n            return;\n         }\n         if (messageMap.hasOwnProperty(data.type)) {\n            handlers = messageMap[data.type];\n            for (i = 0; i < handlers.length; i++) {\n               handlers[i](data.data);\n            }\n         }\n      };\n\n   service = {\n      /**\n       * make handler response to a type of message\n       * @param {string} type The target message type\n       * @param {function} handler The callback for the target message\n       */\n      responseTo: function(type, handler) {\n         if (!messageMap[type]) {\n            messageMap[type] = [];\n         }\n         messageMap[type].push(handler);\n      },\n\n      /**\n       * send message\n       * @param {object} message should contains the \"type\" property\n       */\n      sendMessage: function(message) {\n         console.log(\"sending\", message);\n         message.uid = extendedMonitorModel.uid;\n         if (!message.data) {\n            message.data = {};\n         }\n         message.data.id = extendedMonitorModel.id;\n         message.data.isFullscreen = extendedMonitorModel.isFullscreen;\n         $window.parent.postMessage(message, origin);\n      },\n\n      /**\n       * cancel calling back the handler for the target type\n       * @param {string} type The target message type\n       * @param {function} handler Optimal The callback for the target message,\n       *     if absent, will delete all handlers bound to the message\n       */\n      clearResponsor: function(type, handler) {\n         let handlerIndex;\n\n         if (!messageMap[type]) {\n            return;\n         }\n         if (!handler) {\n            delete messageMap[type];\n         } else {\n            handlerIndex = messageMap[type].indexOf(handler);\n            if (handlerIndex === -1) {\n               return;\n            }\n            messageMap[type].splice(handlerIndex, 1);\n            if (messageMap[type].length === 0) {\n               delete messageMap[type];\n            }\n         }\n      },\n\n      /**\n       * @param {object} model The extendedMonitorModel object\n       */\n      setextendedMonitorModel: function(model) {\n         extendedMonitorModel = model;\n      },\n      onMessage: onMessage,\n      stop: function() {\n         $window.removeEventListener(\"message\", onMessage);\n         $window.removeEventListener('beforeunload', onClose);\n      }\n   };\n\n   onClose = function() {\n      service.sendMessage({\n         type: \"close\"\n      });\n   };\n   $window.addEventListener(\"message\", onMessage, false);\n   $window.addEventListener('beforeunload', onClose);\n   return service;\n}\n\n\nexport function extendedMonitorModel(messageService) {\n   let random,\n      getUid,\n      model;\n\n   random = function() {\n      let d = new Date(),\n         seed = Math.abs(1000 * d.getSeconds() + d.getMilliseconds()),\n         r = seed * Math.random();\n      return r - Math.floor(r);\n   };\n   getUid = function() {\n      return ('xx-xx-xx-xx xx-xx-xx-xx xx-xx-xx-xx xx-xx-xx-xx')\n         .replace(/x/g, function() {\n            let r = random() * 16 | 0;\n            return r.toString(16);\n         });\n   };\n   model = {\n      id: -1,\n      uid: getUid(),\n      isFullscreen: false\n   };\n   messageService.setextendedMonitorModel(model);\n   messageService.responseTo(\"init\", function(data) {\n      model.id = data.id;\n   });\n   return model;\n}\n\nexport function extendedMonitorTranslationService(messageService) {\n   let translationMap = null,\n      initCallback = null,\n      inited = false;\n\n   messageService.responseTo(\"init\", function(data) {\n      translationMap = data.translationMap;\n      inited = true;\n      console.log(\"table inited\");\n      if (typeof initCallback === \"function\") {\n         initCallback();\n      }\n   });\n   return {\n      /**\n       * translate the text if the table are ready\n       * @param  {string} englishText The english text\n       * @return {string} This returns the translated text\n       */\n      translate: function(englishText) {\n         if (!translationMap || !translationMap.hasOwnProperty(englishText)) {\n            return englishText;\n         }\n         return translationMap[englishText];\n      },\n      /**\n       * call the callback when the table loaded.\n       * @param {function} callback\n       */\n      onTranslateReady: function(callback) {\n         if (!inited) {\n            initCallback = callback;\n         } else {\n            initCallback = null;\n            callback();\n         }\n      }\n   };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/extended-monitor-util.js","/*********************************************************\n * Copyright (C) 2016-2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\n/**\n * multimon-wmks-service.js -- multimonWmksService\n *\n * Class to wrap browser wmks events and provide APIs\n *\n */\n\nimport $ from 'jquery';\n\nexport default function multimonWmksService(wmksBaseService) {\n   let wmksHandler,\n      mouseDetectionElement,\n      cursorElement,\n      offset,\n      mouseDetectionInterval,\n      canSendMouseMove,\n      cachedMousePosition,\n      startWorking = false,\n      wmksHandlerMap,\n      // functions\n      onBlur,\n      onMouseEvent,\n      onMouseWheel,\n      onMouseMove,\n      copyProperties,\n      getKeyEventData,\n      onKeyEvent,\n      setCursor,\n      clearCursor,\n      boundWmksEvents,\n      unboundWmksEvents;\n\n   onBlur = function(event) {\n      wmksHandler.onWmks({\n         type: \"onBlur\"\n      });\n   };\n\n   onMouseEvent = function(event, isDownEvent) {\n      let position = wmksBaseService.getEventPosition(event, offset),\n         bmask = 1 << event.button;\n      wmksHandler.onWmks({\n         type: \"mouseButton\",\n         data: {\n            position: position,\n            isDownEvent: isDownEvent,\n            bmask: bmask\n         }\n      });\n   };\n\n   onMouseWheel = function(event) {\n      let position = wmksBaseService.getEventPosition(event, offset),\n         dx = Math.max(Math.min(event.wheelDeltaX, 1), -1),\n         dy = Math.max(Math.min(event.wheelDeltaY, 1), -1);\n\n      wmksHandler.onWmks({\n         type: \"mouseWheel\",\n         data: {\n            position: position,\n            dx: dx,\n            dy: dy\n         }\n      });\n   };\n\n   onMouseMove = function(event) {\n      if (!canSendMouseMove) {\n         // buffer position\n         cachedMousePosition = wmksBaseService.getEventPosition(event, offset);\n         return;\n      }\n      canSendMouseMove = false;\n      let position = wmksBaseService.getEventPosition(event, offset);\n      wmksHandler.onWmks({\n         type: \"mouseMove\",\n         data: {\n            position: position\n         }\n      });\n      setTimeout(function() {\n         // check buffered position\n         canSendMouseMove = true;\n         wmksHandler.onWmks({\n            type: \"mouseMove\",\n            data: {\n               position: cachedMousePosition\n            }\n         });\n\n      }, mouseDetectionInterval);\n   };\n\n   copyProperties = function(dst, src, nameList) {\n      let i, name;\n      for (i = 0; i < nameList.length; i++) {\n         name = nameList[i];\n         if (src[name] !== undefined) {\n            dst[name] = src[name];\n         }\n      }\n   };\n   /**\n    * Will copy below properties to dst object which is enough for wmks to use.\n    * e.originalEvent.key\n    * e.originalEvent.keyIdentifier\n    * e.shiftKey\n    * e.keyCode\n    * e.charCode;\n    * e.altKey\n    * e.ctrlKey,\n    * e.key\n    * e.which\n    */\n   getKeyEventData = function(e) {\n      let passableKeyEvent = {};\n      if (!!e.originalEvent) {\n         passableKeyEvent.originalEvent = {};\n         copyProperties(passableKeyEvent.originalEvent, e.originalEvent,\n            [\"key\", \"keyIdentifier\"]);\n      }\n      copyProperties(passableKeyEvent, e, [\"shiftKey\", \"keyCode\", \"charCode\",\n         \"altKey\", \"ctrlKey\", \"key\", \"which\", \"keyIdentifier\", \"type\",\n         /*extra after here*/\n         \"code\", \"location\", \"metaKey\"\n      ]);\n      return passableKeyEvent;\n   };\n\n   onKeyEvent = function(type, event) {\n      let keyEventData = getKeyEventData(event);\n      wmksHandler.onWmks({\n         type: \"keyEvent\",\n         data: {\n            type: type,\n            event: keyEventData\n         }\n      });\n\n      if (wmksBaseService.shouldPreventDefault(event)) {\n         event.preventDefault();\n      }\n      event.stopPropagation();\n   };\n\n   setCursor = function(url) {\n      cursorElement.style.cursor = url;\n   };\n\n   clearCursor = function() {\n      setCursor(\"\");\n   };\n\n   wmksHandlerMap = {\n      keyboardHandlers: {\n         keyup: function(event) {\n            onKeyEvent(\"KeyUp\", event.originalEvent);\n         },\n         keydown: function(event) {\n            onKeyEvent(\"KeyDown\", event.originalEvent);\n         },\n         keypress: function(event) {\n            onKeyEvent(\"KeyPress\", event.originalEvent);\n         }\n      },\n      mouseHandlers: {\n         mousemove: function(event) {\n            onMouseMove(event.originalEvent);\n         },\n         mousedown: function(event) {\n            onMouseEvent(event.originalEvent, 1);\n         },\n         mouseup: function(event) {\n            onMouseEvent(event.originalEvent, 0);\n         },\n         wheel: function(event) {\n            onMouseWheel(event.originalEvent || window.event);\n         }\n      }\n   };\n\n   boundWmksEvents = function() {\n      let eventName,\n         keyboardHandlers = wmksHandlerMap.keyboardHandlers,\n         mouseHandlers = wmksHandlerMap.mouseHandlers;\n\n      for (eventName in keyboardHandlers) {\n         if (keyboardHandlers.hasOwnProperty(eventName)) {\n            $(document).on(eventName, keyboardHandlers[eventName]);\n         }\n      }\n      for (eventName in mouseHandlers) {\n         if (mouseHandlers.hasOwnProperty(eventName)) {\n            $(mouseDetectionElement).on(eventName,\n               mouseHandlers[eventName]);\n         }\n      }\n      $(window).on(\"blur\", onBlur);\n   };\n\n   unboundWmksEvents = function() {\n      let eventName,\n         keyboardHandlers = wmksHandlerMap.keyboardHandlers,\n         mouseHandlers = wmksHandlerMap.mouseHandlers;\n\n      for (eventName in keyboardHandlers) {\n         if (keyboardHandlers.hasOwnProperty(eventName)) {\n            $(document).off(eventName, keyboardHandlers[eventName]);\n         }\n      }\n      for (eventName in mouseHandlers) {\n         if (mouseHandlers.hasOwnProperty(eventName)) {\n            $(mouseDetectionElement).off(eventName,\n               mouseHandlers[eventName]);\n         }\n      }\n      $(window).off(\"blur\", onBlur);\n   };\n\n   return {\n      /**\n       * Set cursor style\n       * @param {object} data Object contains the image url for cursor\n       */\n      setCursor: function(data) {\n         setCursor(data.url);\n      },\n      /**\n       * Start firing wmks events to the realWmksService.onWmks\n       * @param {object} mouseDetectionTarget The DOM element we want to detect\n       *    mouse\n       * @param {object} cursorTarget The DOM element we want to apply cursor\n       *    on\n       * @param {object} realWmksService This should contains a property of\n       *     \"onWmks\"\n       * @param {object} screenOffset This contains \"x\" and \"y\" to adjust the\n       *     event position\n       */\n      startRedirect: function(mouseDetectionTarget, cursorTarget,\n                              realWmksService, screenOffset) {\n         if (!!startWorking) {\n            console.log(\"skip start wmks since it's already started\");\n            return;\n         }\n         wmksHandler = realWmksService;\n         mouseDetectionElement = mouseDetectionTarget;\n         cursorElement = cursorTarget;\n         offset = screenOffset;\n         mouseDetectionInterval = 20;\n         canSendMouseMove = true;\n         cachedMousePosition = null;\n         boundWmksEvents();\n         startWorking = true;\n      },\n      /**\n       * Stop firing wmks events to the realWmksService.onWmks and clear up\n       */\n      stopRedirect: function() {\n         if (!startWorking) {\n            console.log(\"skip stop wmks since it's not started\");\n            return;\n         }\n         unboundWmksEvents();\n         clearCursor();\n         canSendMouseMove = false;\n         cachedMousePosition = null;\n         wmksHandler = null;\n         mouseDetectionElement = null;\n         offset = null;\n         startWorking = false;\n      }\n   };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/multimon-wmks-service.js","/*********************************************************\n * Copyright (C) 2017 VMware, Inc. All rights reserved.\n *********************************************************/\n\nimport detectorTemplate from './extended_monitor_detector_template.html';\n\n\nexport default function routeConfig($routeProvider) {\n   $routeProvider\n      .when('/detect', {\n         controller: 'extendedMonitorDetector',\n         templateUrl: detectorTemplate\n      })\n      .when('/display', {\n         controller: 'extendedMonitorDisplayer',\n         template: \" \"\n      })\n      .otherwise({\n         redirectTo: '/detect'\n      });\n}\n\n\n// WEBPACK FOOTER //\n// ./desktop/multimon/extended-page/route.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./styles/extended-monitor.css\n// module id = 76\n// module chunks = 1"],"sourceRoot":""}